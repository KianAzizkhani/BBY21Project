<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>Budgeting APP</title>

    <!-- Bootstrap core CSS -->
    <link href="/docs/5.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!--Style sheet-->
    <link rel="stylesheet" href="style.css">

    <!--Google Icons-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
     <!-- Bootstrap FirebaseUI CSS -->


 <!-- Firebase 8 CDNs-->
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
 <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
 <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
 <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
 <script src="https://www.gstatic.com/firebasejs/ui/4.8.1/firebase-ui-auth.js"></script>
 <!--Firebase API-->
<script src="./scripts/firebaseAPI.js"></script>

    <style>

        input {
            font-size: 60%;
            height: 60%;
        }

        select {
            font-size: 90%;
        }

        input {
            font-size: 150%;
        }
        Button {
            text-align: center;
        }

    </style>

</head>

<body>
    <div id="topbar">
        <img src="images/mainpage.png" width="15%" />
        <a style="color: black; float: right;" href="main.html" class="material-icons goRight">home</a>
    </div>
    <h1>Spending Goals</h1>
    <br>
    <br>
    <h2>Enter Goal amount: <input type="text" id="Goal" placeholder="$0.00"></h2>
    <br>
    <h2>What category is your goal?
        <select id="Category" onChange="update()">
			<option value="Food">Food</option>
			<option value="Clothes">Clothes</option>
			<option value="Entertainment">Entertainment</option>
		</select>

    </h2>
    <br>
    <button type="submit" style="margin:auto; display:block;" class="btn btn-primary" id="submitButton" onclick="addGoal()">Submit</button>
    <br>
    <br>
    <table>
        <tr>
            <td>
                <h4>Previous Goal: <span id="goal-goes-here"></span></h4>
            </td>
        </tr>
        <tr>
            <td>
                <h4>Previous Goal: </h4>
            </td>
        </tr>
        <tr>
            <td>
                <h4>Previous Goal: </h4>
            </td>
        </tr>
        <tr>
            <td>
                <h4>Previous Goal: </h4>
            </td>
        </tr>
        <tr>
            <td>
                <h4>Previous Goal: </h4>
            </td>
        </tr>
    </table>
    <div class="fixed-bottom py-3">
        <footer class="navbar justify-content-evenly bg-white fixed-bottom">
            <a href= "categories.html" class="material-icons">category</a>
            <a href="reports.html" class="material-icons">bar_chart</a>
            <a href="add.html" class="material-icons big">add_circle</a>
            <a href="goals.html" class="material-icons">outlined_flag</a>
            <a href="profile.html" class="material-icons">person</a>
        </footer>
    </div>


</body>
<script>
    function addGoal() {
            let Goal = document.getElementById("Goal").value;
            let Category = document.getElementById("Category").value;

            firebase.auth().onAuthStateChanged(user => {
                if (user) {
                    console.log("user is signed in, I'm adding a goal.")
                    var currentUser = db.collection("users").doc(user.uid).collection("Goal");
                    var userID = user.uid;

                    currentUser.add({
                        Goal: Goal,
                        Catgeory: Category,
                        // date: automatic
                    });

                } else {
                    console.log("no user signed in");
                }
            });
        }

        function read_display_goal(){
            console.log(db.collection("users"))
            var currentUser = db.collection("users").doc(user.uid).collection("Goal")
                .onSnapshot(GoalDoc=>{
                    console.log(GoalDoc.data().Goal);
                    document.getElementById("goal-goes-here").innerText = n;
                    console.log("Goal received");
                })
        }

        read_display_goal();

</script>

</html>